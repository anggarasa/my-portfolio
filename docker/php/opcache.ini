; ==============================================================================
; OPcache Configuration for Production
; Optimized for VPS with 2-4GB RAM
; ==============================================================================

; Enable OPcache
opcache.enable = 1

; Enable OPcache for CLI (useful for artisan commands)
opcache.enable_cli = 1

; ==============================================================================
; Memory Settings
; ==============================================================================

; Memory consumption (in MB)
; For 2-4GB RAM VPS, 128-256MB is a good balance
opcache.memory_consumption = 128

; Size of the interned strings buffer (in MB)
opcache.interned_strings_buffer = 16

; Maximum number of files to cache
; Average Laravel app needs ~10000-20000
opcache.max_accelerated_files = 20000

; ==============================================================================
; Optimization Settings
; ==============================================================================

; Don't check file timestamps (PRODUCTION ONLY)
; Set to 0 for production, 1 for development
opcache.validate_timestamps = 0

; How often to revalidate (in seconds) - only used if validate_timestamps=1
opcache.revalidate_freq = 0

; Save comments (needed for some Laravel packages like annotations)
opcache.save_comments = 1

; Enable fast shutdown sequence
opcache.fast_shutdown = 1

; ==============================================================================
; JIT (PHP 8.0+) - Optional
; ==============================================================================

; JIT buffer size (requires opcache.memory_consumption to have room)
; Disabled by default as it may not benefit all workloads
; Uncomment to enable:
; opcache.jit = 1255
; opcache.jit_buffer_size = 64M

; ==============================================================================
; Logging
; ==============================================================================

; Log level: 0-4 (0=disabled, 4=debug)
opcache.log_verbosity_level = 1

; ==============================================================================
; Preloading (PHP 7.4+) - Optional
; ==============================================================================

; Preload Laravel framework for faster startup
; Requires a preload.php file to be created
; Uncomment to enable:
; opcache.preload = /var/www/html/preload.php
; opcache.preload_user = www-data

; ==============================================================================
; File Cache (Optional - useful for shared hosting)
; ==============================================================================

; File cache directory (for shared hosting or faster restarts)
; opcache.file_cache = /tmp/opcache
; opcache.file_cache_only = 0
; opcache.file_cache_consistency_checks = 1
